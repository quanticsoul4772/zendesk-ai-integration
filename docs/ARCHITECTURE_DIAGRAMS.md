# Zendesk AI Integration Architecture Diagrams

This document provides visual diagrams of the Zendesk AI Integration architecture to supplement the textual documentation.

## Clean Architecture Layers

```
┌───────────────────────────────────────────────────────────┐
│                                                           │
│  ┌───────────────────────────────────────────────────┐    │
│  │                                                   │    │
│  │  ┌───────────────────────────────────────┐       │    │
│  │  │                                       │       │    │
│  │  │  ┌───────────────────────────┐        │       │    │
│  │  │  │                           │        │       │    │
│  │  │  │      Domain Layer         │        │       │    │
│  │  │  │                           │        │       │    │
│  │  │  └───────────────────────────┘        │       │    │
│  │  │           Application Layer           │       │    │
│  │  │                                       │       │    │
│  │  └───────────────────────────────────────┘       │    │
│  │                 Presentation Layer               │    │
│  │                                                   │    │
│  └───────────────────────────────────────────────────┘    │
│                                                           │
└───────────────────────────────────────────────────────────┘
        ┌───────────────────────────────────────────┐
        │                                           │
        │          Infrastructure Layer             │
        │                                           │
        └───────────────────────────────────────────┘
```

## Component Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Presentation Layer                            │
│                                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │     CLI      │  │   Webhook    │  │   Reporters  │  │Interactive   │ │
│  │  Commands    │  │   Handler    │  │              │  │   Menu       │ │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘ │
└─────────┼────────────────┼────────────────┼────────────────┼────────────┘
          │                │                │                │
          ▼                ▼                ▼                ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Application Layer                             │
│                                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │AnalyzeTicket │  │  Generate    │  │   Ticket     │  │   Webhook    │ │
│  │  UseCase     │  │ReportUseCase │  │Analysis Svc  │  │   Service    │ │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘ │
└─────────┼────────────────┼────────────────┼────────────────┼────────────┘
          │                │                │                │
          ▼                ▼                ▼                ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                            Domain Layer                                 │
│                                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │   Ticket     │  │   Ticket     │  │  Repository  │  │  AIService   │ │
│  │   Entity     │  │  Analysis    │  │  Interfaces  │  │  Interfaces  │ │
│  └──────────────┘  └──────────────┘  └──────┬───────┘  └──────┬───────┘ │
└───────────────────────────────────────────┬─┴────────────────┬─┴────────┘
                                            │                  │
                                            ▼                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         Infrastructure Layer                            │
│                                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │   MongoDB    │  │   Zendesk    │  │  Unified AI  │  │   Cache      │ │
│  │  Repository  │  │  Repository  │  │   Service    │  │   Adapter    │ │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

## Ticket Analysis Flow Diagram

```
┌──────────┐     ┌───────────────┐    ┌───────────────────┐    ┌───────────────┐
│  User    │     │ Command Line  │    │ CommandHandler    │    │ AnalyzeTicket │
│          │     │ Interface     │    │                   │    │   UseCase     │
└────┬─────┘     └───────┬───────┘    └─────────┬─────────┘    └───────┬───────┘
     │                   │                      │                      │
     │ Execute command   │                      │                      │
     │ ─────────────────>│                      │                      │
     │                   │ Parse and dispatch   │                      │
     │                   │ ─────────────────────>                      │
     │                   │                      │ Execute use case     │
     │                   │                      │ ─────────────────────>
     │                   │                      │                      │
     │                   │                      │                      │
     │                   │                      │                      │
     │                   │                      │                      │
     │                   │                      │                      │
┌────┴─────┐     ┌───────┴───────┐    ┌─────────┴─────────┐    ┌───────┴───────┐
│          │     │               │    │                   │    │               │
└──────────┘     └───────────────┘    └───────────────────┘    └───────────────┘

┌───────────────┐    ┌───────────────┐    ┌───────────────┐    ┌───────────────┐
│ Ticket        │    │ Zendesk       │    │ AIService     │    │ MongoDB       │
│ Repository    │    │ Repository    │    │ Implementation │    │ Repository    │
└───────┬───────┘    └───────┬───────┘    └───────┬───────┘    └───────┬───────┘
        │                    │                    │                    │
        │                    │                    │                    │
        │ Get ticket         │                    │                    │
        │ ──────────────────>│                    │                    │
        │                    │ Fetch from API     │                    │
        │                    │ ───────┐           │                    │
        │                    │        │           │                    │
        │                    │ <──────┘           │                    │
        │ Return ticket      │                    │                    │
        │ <──────────────────│                    │                    │
        │                    │                    │                    │
        │ Analyze content    │                    │                    │
        │ ───────────────────────────────────────>│                    │
        │                    │                    │ Process with AI    │
        │                    │                    │ ───────┐           │
        │                    │                    │        │           │
        │                    │                    │ <──────┘           │
        │ Return analysis    │                    │                    │
        │ <───────────────────────────────────────│                    │
        │                    │                    │                    │
        │ Save analysis      │                    │                    │
        │ ───────────────────────────────────────────────────────────>│
        │                    │                    │                    │ Store in DB
        │                    │                    │                    │ ───────┐
        │                    │                    │                    │        │
        │                    │                    │                    │ <──────┘
        │ Confirm saved      │                    │                    │
        │ <───────────────────────────────────────────────────────────│
┌───────┴───────┐    ┌───────┴───────┐    ┌───────┴───────┐    ┌───────┴───────┐
│               │    │               │    │               │    │               │
└───────────────┘    └───────────────┘    └───────────────┘    └───────────────┘
```

## Dependency Injection Flow

```
┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│                │     │                │     │                │
│  Component A   │     │ DI Container   │     │  Interface X   │
│                │     │                │     │                │
└────────┬───────┘     └────────┬───────┘     └────────┬───────┘
         │                      │                      │
         │                      │                      │
         │  Resolve Interface X │                      │
         │ ─────────────────────>                      │
         │                      │                      │
         │                      │    Implements        │
         │                      │ <─────────────────────
         │                      │                      │
┌────────┴───────┐     ┌────────┴───────┐     ┌────────┴───────┐
│                │     │                │     │                │
└────────────────┘     └────────────────┘     └────────────────┘
                              │
                              │
                              ▼
                       ┌────────────────┐
                       │                │
                       │ Implementation │
                       │    of X        │
                       │                │
                       └────────────────┘
```

## Unified AI Service Architecture

```
┌───────────────────────────────────────────────────────────────┐
│                    Application Layer                          │
│                                                               │
│  ┌────────────────────────────────────────────────────────┐   │
│  │                                                        │   │
│  │                 AnalyzeTicketUseCase                   │   │
│  │                                                        │   │
│  └───────────────────────────┬────────────────────────────┘   │
│                              │                                 │
└──────────────────────────────┼─────────────────────────────────┘
                               │
                               │ uses
                               ▼
┌───────────────────────────────────────────────────────────────┐
│                      Domain Layer                             │
│                                                               │
│  ┌────────────────────────────────────────────────────────┐   │
│  │                                                        │   │
│  │                AIService Interface                     │   │
│  │                                                        │   │
│  └───────────────────────────┬────────────────────────────┘   │
│                              │                                 │
└──────────────────────────────┼─────────────────────────────────┘
                               │
                               │ implements
                               ▼
┌───────────────────────────────────────────────────────────────┐
│                   Infrastructure Layer                        │
│                                                               │
│  ┌────────────────────────────────────────────────────────┐   │
│  │                                                        │   │
│  │                 UnifiedAIService                       │   │
│  │                                                        │   │
│  └───────┬─────────────────────────────────────┬─────────┘   │
│          │                                     │              │
│          │                                     │              │
│          ▼                                     ▼              │
│  ┌──────────────────┐                 ┌──────────────────┐   │
│  │                  │                 │                  │   │
│  │   OpenAI API     │                 │   Claude API     │   │
│  │                  │                 │                  │   │
│  └──────────────────┘                 └──────────────────┘   │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

## Caching Strategy

```
┌────────────────────────────────────────────────────────────────┐
│                                                                │
│                      Client Request                            │
│                                                                │
└──────────────────────────────┬─────────────────────────────────┘
                               │
                               ▼
┌────────────────────────────────────────────────────────────────┐
│                                                                │
│                     Cache Lookup                               │
│                                                                │
└──────────────────────────────┬─────────────────────────────────┘
                               │
           ┌──────────────────┴───────────────────┐
           │                                      │
           ▼                                      ▼
┌────────────────────┐                 ┌────────────────────────┐
│                    │                 │                        │
│    Cache Hit       │                 │      Cache Miss        │
│                    │                 │                        │
└─────────┬──────────┘                 └───────────┬────────────┘
          │                                        │
          │                                        ▼
          │                             ┌────────────────────────┐
          │                             │                        │
          │                             │   Fetch from API       │
          │                             │                        │
          │                             └───────────┬────────────┘
          │                                         │
          │                                         ▼
          │                             ┌────────────────────────┐
          │                             │                        │
          │                             │   Update Cache         │
          │                             │                        │
          │                             └───────────┬────────────┘
          │                                         │
          └─────────────────────┬──────────────────┘
                                │
                                ▼
           ┌────────────────────────────────────────┐
           │                                        │
           │           Return Result                │
           │                                        │
           └────────────────────────────────────────┘
```
